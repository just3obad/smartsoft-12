<%= render 'shared/error_messages' %>
	<div class="container-fluid maindiv">
	
	<div class="row-fluid">

	 <div class="span2">
	      	<ul class="nav nav-list">

		<li class="nav-header">
					    Search
					  </li>
						<li class="divider"></li>
						<li>
							<%= form_tag("/logs/search", :method => "get") %>
							  <input type="text" class="input-medium" placeholder="search keyword">
							  <button type="submit" class="btn btn-primary">Search</button>
							</form>
						</li>
						<li class="divider"></li>
		<li class="nav-header">
					    Filter By
					  </li>
						<li class="divider"></li>
					
				<%= form_tag("/logs/filter", :method => "get") %>
				<label class="checkbox">
			    <input type="checkbox" value= "true" <%if( $admins=='true')%>  checked <%end%> name="admins" id="admin"> Admins
			  </label>
			 <label class="checkbox">
			    <input type="checkbox" value= "true" <%if( $users=='true')%>  checked <%end%>  name="users" id="users"> Users
			  </label>
			 <label class="checkbox">
			    <input type="checkbox" value= "true"  <%if( $stories=='true')%>  checked <%end%> name="stories" id="stories"> Stories
			  </label>
			 <label class="checkbox">
			    <input type="checkbox" value= "true" <%if( $interests=='true')%>  checked <%end%>  name="interests" id="interests"> Interests
			  </label>	  
				<div>
					 	<input class="btn btn-primary" name="commit" type="submit" 
						         value="Filter" />
					
					</div>
						</form>
		
			<li class="divider"></li>
			<li class="nav-header">
						   Choose a Period
						  </li>
			<li class="divider"></li>
		
			<li>
				<%if( $datefilter==true ) 
					@text1= $from_date 
						end%>
							<%if( $datefilter==true ) 
								@text2= $to_date 
									end%>
				<%= form_tag("/logs/filterbydate", :method => "get") %>
					  <label for="from" class="logs-take-input" >From :</label>
					  <input type="text" class="input-medium" placeholder="YYYY-MM-DD" <%if( $datefilter==true )%> value=<%=@text1%> <%end%>  name="from"id="from">
					 <label for="to"class="logs-take-input" >To :</label>
					  <input type="text" class="input-medium" placeholder="YYYY-MM-DD" <%if( $datefilter==true )%> value=<%=@text2%> <%end%> name="to" id="to">
				<div>
					 	<input class="btn btn-primary" name="commit" type="submit" 
						         value="Go" />
									<%=if $datefilter==true
									link_to "back to default", logs_path, class: "control-absolute btn btn-primary" 
									end%>
					</div>
						</form>
					
				</li>
					
						<li class="divider"></li>
						<li class="nav-header">
									   Download Log File
									  </li>
						<%=link_to "Get .txt Files", logs_path, class: "control-absolute btn btn-primary"  %>	
						
		
			</ul>
			
		
			  
	    </div>

	    <div class="span10 pre-scrollable" >
			<table class=" table table-striped table-bordered">
			  <thead>
			    <tr>
					 <td><h3>Type</h3></td>
					  <td class="logs-table-row"><h3>TimeStamp</h3></td>
					 <td><h3>Log Message</h3></td>
			    </tr>
			  </thead>
			  <tbody>
				<%$counter = 0%>
			     <% $logs.each do |l| %>
					<% if $typefilter==true && $admins!="true"&&l.loggingtype == 1 then next end%>	
						<% if $typefilter==true && $users!="true"&&l.loggingtype == 0 then next end%>	
							<% if $typefilter==true && $stories!="true"&&l.loggingtype == 2 then next end%>	
								<% if $typefilter==true && $interests!="true"&&l.loggingtype == 3 then next end%>
									<% if $datefilter==true && (l.created_at.to_date<$from_date || l.created_at.to_date>$to_date) then next end%>
			                    <% if l.loggingtype == 0
						         then  @st = "redbadge"
						         elsif l.loggingtype == 1
						           then @st = "bluebadge"
						         elsif l.loggingtype == 2
						           then @st = "yellowbadge"
								elsif l.loggingtype == 3
						          then @st = "greenbadge"
						         end %>
				  <tr >
				  <td><span class=<%=@st%> >
				                    <%= if l.loggingtype == 1
							         then  "Admin"
							         elsif l.loggingtype == 0
							           then  "User"
							         elsif l.loggingtype == 2
							           then "Story"
									elsif l.loggingtype == 3
							          then "Interest"
							         end %></span></td>
				  <td class="logs-table-row"><%= l.created_at %></td>
				  <td><%= l.message %></td>
				  </tr>
					<%$counter = $counter+1%>
				<% end %>
			
			  </tbody>
			</table>
		
				<%if $counter==0%>
					
							<h3 class="logs-take-input errorwell span2 offset3">No Data Found</h3>
						
					<%end%>
		</div>
		
			
	
	</div>
	
  </div>

		</div>
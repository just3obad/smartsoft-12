<script type="text/javascript" charset="utf-8">
  //This is a method that will be called on viewing this page it gets the data that will be added to the graph + what's the start
   //point and also what is the interval between each two points default will be 1 day also it takes the names of the things it
   //view across time by default for a story we will view no of shares , no of likes, no of dislikes and no of spams and no of comments
   //and then call method kl that will view the graph with the parameters already stated.
   
   //also this method gets the start date of data flow from get_interest_start_date method in interestshelper

  var $j = jQuery.noConflict();
  $j(document).ready(function() {
     //get The user's array of arrays of data
      data= <%= get_user_stat(@id) %>;
      //the graphs that we want to show
      names=["No Of Shares","No Of Likes","No of Dislikes","No of Spams","No of Comments"]; 
      //the time interval between one point and another in the graph.
      pointInterval= <%= 1.day * 1000 %>; 
      // Start point of the graph.
       x = <%= get_user_start_date(@id).to_i %>;
        if(x != -1) {
        x=x+1;
      pointStart= <%= get_user_start_date(@id).days.ago.to_i * 1000 %>;
      //Label for x-axis 
      xl="Day"; 
      //Label for y-axis
      yl="Number";
      //Label for graph title
      titleOfGraph="User Stat";
      //call the method that renders the graph with the calculated parameters.
       document.getElementById("deactivatedUser").style.display= "none"; 
      Graph(data,names,pointInterval,pointStart,xl,yl,titleOfGraph);
      } else {
         document.getElementById("deactivatedUser").style.display = "block";
      document.getElementById("ccc").style.display = "none";
      }  
   });
</script>
<!-- ccc is the id of the div that the graph would render to -->
<div id="ccc" style="width: 1230px; margin-left: 30px;"></div>


<div class="alert" id="deactivatedUser" style="display: none;">
  
           <a class="close" data-dismiss="alert">Ã—</a>
           <h1><strong>Warning!</strong> User was deactivated before the last 30 days.</h1>
     </div>

 <div id="shared_stories" style="padding-top:30px; padding-left:30px;">
  <%if @user.get_shared_stories.empty?%>
   <div class="alert-error" id="noStoriesShared" >
  
           <h3><strong>Warning!</strong> No Stories Shared By This User.</h3>
     </div> 
  <%else%>
<h4><div class="alert alert-info"> 
              Stories Shared By This User : </br>
             
            </div></h4>
    <!-- to list all the stories -->
 <%@user.get_shared_stories.each do |story|%>
<div class="well-story-component">

        <a href="/stories/<%= story.id%>"class="thumbnail-story-component">
               <%= image_tag "logo.jpeg", :size => "75x75" %>

          </a>
           
        <div class="story-component-info">
              <h3><%= story.title %></h3>
<%= link_to "view Statistics",
{:controller => 'statistics', :action => 'stories', :id => story.id},
class: "story-component-button-absolute btn btn-primary"%>
        </div>

</div>
<%end%>
<%end%>
 </div>    

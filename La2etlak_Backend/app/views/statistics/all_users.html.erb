<script type="text/javascript" charset="utf-8">
var $j = jQuery.noConflict();
  $j(document).ready(function() {
      //get The users' array of arrays of data
      data= <%= User.get_all_users_stat %>;
      if (data.length != 0) {
      //the graphs that we want to show
      names=["Registered Users","Logged in"]; 
      //the time interval between one point and another in the graph.
      pointInterval= <%= 1.day * 1000 %>; 
      // Start point of the graph.
      x= <%= User.get_all_users_start_date %>;
      if(x != -1) {
      pointStart= <%= User.get_all_users_start_date.days.ago.to_i * 1000 %>;
      //Label for x-axis
      xl="Day"; 
      yl="Number";
      titleOfGraph="All Users Statistics"; 
      //call the method that renders the graph with the calculated parameters.
     document.getElementById("noUser").style.display= "none"; 
      Graph(data,names,pointInterval,pointStart,xl,yl,titleOfGraph); 
      } else {
       document.getElementById("noUser").style.display= "block";  
        document.getElementById("ccc").style.display= "none"; 
      }
      } else {
        document.getElementById("noUser").style.display= "block";  
        document.getElementById("ccc").style.display= "none"; 
      }
     
   });
</script>
<div class="row-fluid">
   <div class="span3">
      <!--Sidebar content-->
      <div class="well sidebar-nav">
    <ul class="nav nav-list">
    
      <li class="nav-header">
        Statistics
      </li>
      <li class="active">
       <%= link_to "Users", {controller: 'statistics' ,action: 'all_users'} %>
      </li>
       <li>
       <%= link_to "Interests", {controller: 'statistics' ,action: 'all_interests'} %>
       </li>
        <li>
       <%= link_to "Stories", {controller: 'statistics' ,action: 'all_stories'} %>
       </li>
 
     </ul>
    </div>
    </div>
    <div class="span9">
<div class="alert" id="noUser" style="display: none;">
  
           <a class="close" data-dismiss="alert">Ã—</a>
           <h1><strong>Warning!</strong> No Users in our database Yet.</h1>
     </div>

<div id="ccc"></div>
<div class="general info">
            
            <!--Here we'll get the number of users in the system:-->
            <h4><div class="alert alert-info">Number of registered users : 
            <%= User.all_user_registered %>
            </div></h4>
            
          
          </div>
          </div>
          </div>
		  
 <table class="table table-striped table-bodered">
    <tr>

    <th>  </th>
	<th> Rank </th>
    <th> Username </th>
    <th> First Name </th>
    <th> Last Name </th>
    <th> Email </th>
	<th> Points </th>
  </tr>
  <tr>
  <% if @users.nil? == true %>
  <div style="position: absolute; top: 400px; left: 300px; z-index: 1px; visibility: show;">
		 <font size="7" face="verdana" color="red" > No Users Registered Yet </font>
		 <a/>
	</div>  
  <% else %>
	<% i = 1 %>
	<% for user in @users %>
		<tr>
			<td><img style="width:150px; height:150px;" src= <%= user.image %> ></td>
			<td><%= link_to(i, {:controller => "users", :action => "show", :id => user.id} ) %></td>
			<td><%= link_to(user.name, {:controller => "users", :action => "show", :id => user.id} ) %></td>
			<td><%= user.first_name %></td>
			<td><%= user.last_name %></td>
			<td><%= user.email %></td>
			<td><%= user.get_user_rank %></td>
		</tr>
		<% i = i+1 %>
		<% if i == 6 %>
			<% break %>
		<% end %>
  <% end %>
 <% end %>
</table>


